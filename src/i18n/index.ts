import AsyncStorage from "@react-native-async-storage/async-storage"
import * as Localization from "expo-localization"
import i18n from "i18next"
import { initReactI18next } from "react-i18next"

const resources = {
  es: {
    translation: {
      home: {
        title: "Organiza tus pagos f치cilmente",
        subtitle:
          "Controla todas tus suscripciones y pagos recurrentes desde una sola app",

        signUpButton: "Crear cuenta gratuita",
        loginButton: "Iniciar sesi칩n",

        reminders:
          "Recordatorios autom치ticos: Nunca olvides un pago importante",
        categories:
          "Visualiza por categor칤a: Organiza tus gastos de forma inteligente",
        reports: "Reportes mensuales: Analiza tus patrones de gasto",

        terms: "T칠rminos",
        privacy: "Privacidad",
        support: "Soporte",
        rights: "춸 2024 CronoPay. Todos los derechos reservados.",
      },
      login: {
        title: "Iniciar sesi칩n",
        subtitle: "Ingresa con tu correo y contrase침a para continuar.",
        continueWith: "o contin칰a con",
        noAccount: "쯅o tienes cuenta?",
        signUp: "Reg칤strate",

        emailPlaceholder: "Correo electr칩nico",
        passwordPlaceholder: "Contrase침a",
        defaultError: "Ocurri칩 un error",
      },
      signup: {
        title: "Crear cuenta",
        subtitle: "Reg칤strate con tu correo para comenzar.",
        namePlaceholder: "Nombre completo",
        repeatPasswordPlaceholder: "Repite tu contrase침a",
        alreadyHaveAccount: "쯏a tienes cuenta?",
        button: "Registrarse",
      },
      monthNames: [
        "Enero",
        "Febrero",
        "Marzo",
        "Abril",
        "Mayo",
        "Junio",
        "Julio",
        "Agosto",
        "Septiembre",
        "Octubre",
        "Noviembre",
        "Diciembre",
      ],
      monthNamesShort: [
        "Ene",
        "Feb",
        "Mar",
        "Abr",
        "May",
        "Jun",
        "Jul",
        "Ago",
        "Sep",
        "Oct",
        "Nov",
        "Dic",
      ],

      profilAndSettings: "Perfil y Configuraci칩n",
      editProfile: "Editar perfil",
      uploadingImage: "Subiendo imagen...",
      changeProfilePhoto: "Cambiar foto de perfil",
      clickToChangePhoto: "Haz clic para cambiar tu foto. M치ximo 5MB.",
      fullName: "Nombre completo",
      enterFullName: "Ingresa tu nombre completo",
      emailAddress: "Correo electr칩nico",
      emailCannotModify: "El correo electr칩nico no se puede modificar por seguridad",
      saveChanges: "Guardar cambios",
      saving: "Guardando...",
      aboutPersonalInfoTitle: "Sobre tu informaci칩n personal",
      aboutPersonalInfoBody: "Tu informaci칩n personal est치 protegida y solo t칰 puedes verla y modificarla. Nunca compartiremos tus datos con terceros sin tu consentimiento expl칤cito.",
      LoadingProfile: "Cargando perfil...",
      UnknownEmail: "correo@ejemplo.com",
      settings: "Configuraciones",
      notifications: "Notificaciones",
      PaymentReminders: "Recordatorios de pagos",
      language: "Idioma",
      chooseYourPreferredLanguage: "Elige tu idioma preferido",
      Spanish: "Espa침ol",
      English: "Ingl칠s",
      theme: "Tema",
      chooseYourFavoriteTheme: "Elige tu tema preferido",
      backup: "Copia de seguridad",
      security: "Seguridad",
      themeLight: "Modo claro",
      themeDark: "Modo oscuro",
      backupAuto: "Respaldo autom치tico",
      setUpAutomaticBackup: "Configurar respaldo autom치tico",
      backupManual: "Respaldo manual",
      passwordAndAuth: "Contrase침a y autenticaci칩n",
      ChangePassword: "Cambiar contrase침a",
      ConfigurePasswordAndAuthentication:
        "Configurar contrase침a y autenticaci칩n",
      TwoFactorAuth: "Autenticaci칩n de dos factores",
      signOut: "Cerrar sesi칩n",
      AreYouSureYouWantToLogOut: "쮼st치s seguro de que quieres cerrar sesi칩n?",
      Cancel: "Cancelar",
      Confirm: "Confirmar",
      Paid: "Pagado",
      Pending: "Pendiente",
      Pendings: "Pendientes",
      Overdue: "Atrasado",
      Uncategoryed: "Sin categor칤a",
      Payments: "Pagos",
      Payment: "Pago",
      MonthPayment: "Pagos del mes",
      Completed: "Completado",
      TotalMonth: "Total Mensual",
      TotalAmount: "Monto Total",
      LoadingStats: "Cargando estad칤sticas...",
      LoadingReports: "Cargando reportes...",
      PaymentsEvolution: "Evoluci칩n de pagos",
      NoPaymentsData: "No hay datos de pagos disponibles",
      LastMovements: "칔ltimos movimientos",
      NoPeriodMovements: "No hay movimientos para este periodo.",
      Month: "Mes",
      Trimester: "Trimestre",
      Year: "A침o",
      DistributionByCategory: "Distribuci칩n por categor칤a",
      VsLastMonth: "vs Mes Anterior",
      SelectMonthMessage: "Selecciona un mes para ver el resumen de tus pagos",
      TotalPayments: "Total de Pagos",
      NoCategoryData: "No hay datos disponibles para esta categor칤a",
      ExportReport: "Exportar Reporte",
      DownloadPDF: "Descargar PDF",
      ExportExcel: "Exportar Excel",
      SendMail: "Enviar por Correo",
      WIP: "Funcionalidad en desarrollo",
      WIPExcel:
        "La funcionalidad de exportar a Excel estar치 disponible pr칩ximamente",
      WIPEmail:
        "La funcionalidad de exportar por correo electr칩nico estar치 disponible pr칩ximamente",
      WIPPdf:
        "La funcionalidad de exportar a PDF estar치 disponible pr칩ximamente",
      PaymentsDetails: "Detalles de Pagos",
      Found: "encontrados",
      MonthSelectorMessage:
        "Selecciona el a침o y luego el mes para filtrar tus reportes.",
      SelectPeriod: "Elige un Periodo",
      PaymentsTitle: "Pagos",
      CalendarTitle: "Calendario",
      HomeTitle: "Inicio",
      StatisticsTitle: "Panel de Estad칤sticas",
      ReportsTitle: "Reportes Mensuales",
      PaymentTab: "Pagos",
      CalendarTab: "Calendario",
      HomeTab: "Inicio",
      StatisticsTab: "Estad칤sticas",
      ReportsTab: "Reportes",
      Hi: "Hola",
      WelcomeMessage: "Aqui tienes un resumen de tus pagos",
      User: "Usuario",
      Others: "Otros",
      NextDueDates: "Pr칩ximos Vencimientos",
      AddNewPayment: "Agregar Nuevo Pago",

      // Calendario
      PaymentCalendar: "Calendario de Pagos",
      PaymentsInMonth: "pago(s) en",
      Previous: "Anterior",
      Next: "Siguiente",
      Today: "Hoy",
      DayNames: ["Dom", "Lun", "Mar", "Mi칠", "Jue", "Vie", "S치b"],
      Selected: "Seleccionado",
      Overdue_plural: "Vencidos",
      Completed_plural: "Completados",
      SummaryOf: "Resumen de",
      Total: "Total",
      DaysWithPayments: "D칤as con pagos",
      LoadingPayments: "Cargando pagos...",
      NoPaymentsInMonth: "No hay pagos en",
      PaymentsOf: "Pagos del",
      Of: "de",
      TotalOfDay: "Total del d칤a:",

      // Pantalla de Pagos
      AllPayments: "游늰 Todos los Pagos",
      ReviewUpcomingObligations:
        "Revisa tus obligaciones pr칩ximas y mantente al d칤a.",
      NotAuthenticated: "No autenticado",
      MustLoginToSeePayments: "Debes iniciar sesi칩n para ver tus pagos",
      ErrorLoadingPayments: "Error al cargar pagos",
      NoPaymentsRegisteredThisMonth: "No hay pagos registrados para este mes",
      CanStartAddingOne:
        "Puedes comenzar a침adiendo uno desde el bot칩n inferior.",
      DaysAgo: "Vencido hace",
      Day: "d칤a",
      Days: "d칤as",
      Tomorrow: "Ma침ana",
      InDays: "En",
      InDaysPlural: "d칤as",
      GeneralTotal: "Total General:",
      PendingPayments: "Pendientes:",
      PaidPayments: "Pagados:",

      // Recordatorios de Pago
      Reminders: "游늰 Reminders",
      NoPaymentReminders: "No hay recordatorios de pagos pendientes",
      MustLoginToSeeReminders:
        "Debes iniciar sesi칩n para ver tus recordatorios",
      ErrorLoadingReminders: "Error al cargar recordatorios",
      LoadingReminders: "Cargando recordatorios...",
      TotalPaymentsPending: "Total de pagos pendientes:",
      TotalPaymentsColon: "Total Pagos:",
      // Recordatorio editor
      EditReminder: "Editar recordatorio",
      Date: "Fecha",
      Time: "Hora",
      Message: "Mensaje",
      MessageOptional: "Mensaje (opcional)",
      MessagePlaceholder: "Recordar pagar suscripci칩n",
      ScheduleNotification: "Programar notificaci칩n",
      ScheduleNotificationHint: "Al activar, recibir치s una notificaci칩n local en la fecha y hora seleccionadas. Aseg칰rate de conceder permisos de alarma si tu dispositivo lo requiere.",
      Save: "Guardar",
      Delete: "Eliminar",
      DeleteReminderTitle: "Eliminar recordatorio",
      DeleteReminderConfirm: "쮼st치s seguro?",
      InvalidDate: "Fecha inv치lida",
      InvalidTime: "Hora inv치lida",
      ReminderMustBeFuture: "El recordatorio debe programarse en una fecha y hora futuras.",
      ReminderTooSoon: "La fecha del recordatorio debe ser al menos 1 minuto en el futuro",
      SaveReminder: "Guardar recordatorio",
      SelectPayment: "Selecciona un pago",
      SelectPaymentTitle: "Selecciona un pago",
      Close: "Cerrar",
      ErrorUpdatingReminder: "Error actualizando recordatorio",
      ErrorDeletingReminder: "No se pudo eliminar el recordatorio",
      Reminder: "Recordatorio",
      // Recordatorios list
      schedulingLimitedWarning: "La programaci칩n de recordatorios est치 limitada en este entorno (no hay soporte de triggers). Algunas funciones pueden no estar disponibles.",
      FilterAll: "Todos",
      FilterPending: "Pendientes",
      FilterOverdue: "Vencidos",
      FilterPaid: "Pagado",
      noRemindersForFilter: "No hay recordatorios para este filtro.",
      "status.today": "Hoy",
      "status.upcoming": "Pr칩ximo",
      "status.overdue": "Vencido",
      "status.paid": "Pagado",
      alarmPermissionRequiredTitle: "Permiso requerido",
      alarmPermissionRequiredBody: 'Android requiere el permiso de "alarma exacta" para programar recordatorios en segundo plano. 쯈uieres abrir la configuraci칩n de permisos para habilitarlo?',
      openSettings: "Abrir ajustes",
      PaidOn: "Pagado el",
      DueOn: "Vence el",
      

      // Acciones de Pago
      Success: "칄xito",
      MarkedAsPaid: "marcado como pagado",
      Error: "Error",
      CouldNotMarkAsPaid: "No se pudo marcar el pago como pagado",
      DeletePayment: "Eliminar Pago",
      SureToDeletePayment: "쮼st치s seguro de que quieres eliminar el pago",
      Deleted: "eliminado",
      CouldNotDeletePayment: "No se pudo eliminar el pago",

      // Tarjeta de Pago
      PaymentColon: "Pago:",
    },
  },
  en: {
    translation: {
      home: {
        title: "Organize your payments easily",
        subtitle:
          "Manage all your subscriptions and recurring payments from a single app",

        signUpButton: "Create free account",
        loginButton: "Log in",

        reminders: "Automatic reminders: Never forget an important payment",
        categories: "View by category: Organize your expenses intelligently",
        reports: "Monthly reports: Analyze your spending patterns",

        terms: "Terms",
        privacy: "Privacy",
        support: "Support",
        rights: "춸 2024 CronoPay. All rights reserved.",
      },
      login: {
        title: "Log in",
        subtitle: "Enter your email and password to continue.",
        continueWith: "or continue with",
        noAccount: "Don't have an account?",
        signUp: "Sign up",

        emailPlaceholder: "Email address",
        passwordPlaceholder: "Password",
        defaultError: "An error occurred",
      },
      signup: {
        title: "Create account",
        subtitle: "Sign up with your email to get started.",
        namePlaceholder: "Full name",
        repeatPasswordPlaceholder: "Repeat your password",
        alreadyHaveAccount: "Already have an account?",
        button: "Sign up",
      },
      monthNames: [
        "January",
        "February",
        "March",
        "April",
        "May",
        "June",
        "July",
        "August",
        "September",
        "October",
        "November",
        "December",
      ],
      monthNamesShort: [
        "Jan",
        "Feb",
        "Mar",
        "Apr",
        "May",
        "Jun",
        "Jul",
        "Aug",
        "Sep",
        "Oct",
        "Nov",
        "Dec",
      ],

      profilAndSettings: "Profile and Settings",
      editProfile: "Edit Profile",
      uploadingImage: "Uploading image...",
      changeProfilePhoto: "Change profile photo",
      clickToChangePhoto: "Tap to change your photo. Max 5MB.",
      fullName: "Full name",
      enterFullName: "Enter your full name",
      emailAddress: "Email address",
      emailCannotModify: "Email cannot be changed for security reasons",
      saveChanges: "Save changes",
      saving: "Saving...",
      aboutPersonalInfoTitle: "About your personal information",
      aboutPersonalInfoBody: "Your personal information is protected and only you can view and modify it. We will never share your data with third parties without your explicit consent.",
      LoadingProfile: "Loading profile...",
      UnknownEmail: "email@example.com",
      settings: "Settings",
      notifications: "Notifications",
      PaymentReminders: "Payment Reminders",
      language: "Language",
      chooseYourPreferredLanguage: "Choose your preferred language",
      Spanish: "Spanish",
      English: "English",
      theme: "Theme",
      chooseYourFavoriteTheme: "Choose your favorite theme",
      backup: "Backup",
      security: "Security",
      themeLight: "Light mode",
      themeDark: "Dark mode",
      backupAuto: "Automatic backup",
      setUpAutomaticBackup: "Set up automatic backup",
      backupManual: "Manual backup",
      passwordAndAuth: "Password and authentication",
      ChangePassword: "Change Password",
      ConfigurePasswordAndAuthentication:
        "Configure Password and Authentication",
      TwoFactorAuth: "Two-factor authentication",
      signOut: "Sign Out",
      AreYouSureYouWantToLogOut: "Are you sure you want to log out?",
      Cancel: "Cancel",
      Confirm: "Confirm",
      Paid: "Paid",
      Pending: "Pending",
      Pendings: "Pendings",
      Overdue: "Overdue",
      Uncategoryed: "Uncategoryed",
      Payments: "Payments",
      Payment: "Payment",
      MonthPayment: "Month Payments",
      Completed: "Completed",
      TotalMonth: "Total Month",
      TotalAmount: "Total Amount",
      LoadingStats: "Loading statistics...",
      LoadingReports: "Loading reports...",
      PaymentsEvolution: "Payments Evolution",
      NoPaymentsData: "No payments data available",
      LastMovements: "Last Movements",
      NoPeriodMovements: "No movements for this period.",
      Month: "Month",
      Trimester: "Trimester",
      Year: "Year",
      DistributionByCategory: "Distribution by Category",
      VsLastMonth: "vs Last Month",
      SelectMonthMessage: "Select a month to view a summary of its payments",
      TotalPayments: "Total Payments",
      NoCategoryData: "No data available for this category",
      ExportReport: "Export Report",
      DownloadPDF: "Download PDF",
      ExportExcel: "Export Excel",
      SendMail: "Send by Email",
      WIP: "Work in progress",
      WIPExcel: "Excel export functionality will be available soon",
      WIPEmail: "Email export functionality will be available soon",
      WIPPdf: "PDF export functionality will be available soon",
      PaymentsDetails: "Payments Details",
      Found: "found",
      MonthSelectorMessage:
        "Select a year and then month to view your payment summary",
      SelectPeriod: "Select Period",
      PaymentsTitle: "Payments",
      CalendarTitle: "Calendar",
      HomeTitle: "Home",
      StatisticsTitle: "Statistics Dashboard",
      ReportsTitle: "Monthly Reports",
      PaymentTab: "Payments",
      CalendarTab: "Calendar",
      HomeTab: "Home",
      StatisticsTab: "Statistics",
      ReportsTab: "Reports",
      Hi: "Hi",
      WelcomeMessage: "Here is a summary of your payments",
      User: "User",
      Others: "Others",
      NextDueDates: "Next Due Dates",
      AddNewPayment: "Add New Payment",

      // Calendar
      PaymentCalendar: "Payment Calendar",
      PaymentsInMonth: "payment(s) in",
      Previous: "Previous",
      Next: "Next",
      Today: "Today",
      DayNames: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
      Selected: "Selected",
      Overdue_plural: "Overdue",
      Completed_plural: "Completed",
      SummaryOf: "Summary of",
      Total: "Total",
      DaysWithPayments: "Days with payments",
      LoadingPayments: "Loading payments...",
      NoPaymentsInMonth: "No payments in",
      PaymentsOf: "Payments of",
      Of: "of",
      TotalOfDay: "Total of the day:",

      // Payments Screen
      AllPayments: "游늰 All Payments",
      ReviewUpcomingObligations:
        "Review your upcoming obligations and stay on track.",
      NotAuthenticated: "Not authenticated",
      MustLoginToSeePayments: "You must log in to see your payments",
      ErrorLoadingPayments: "Error loading payments",
      NoPaymentsRegisteredThisMonth: "No payments registered for this month",
      CanStartAddingOne: "You can start by adding one from the button below.",
      DaysAgo: "Overdue by",
      Day: "day",
      Days: "days",
      Tomorrow: "Tomorrow",
      InDays: "In",
      InDaysPlural: "days",
      GeneralTotal: "General Total:",
      PendingPayments: "Pending:",
      PaidPayments: "Paid:",

      // Payment Reminders
      Reminders: "游늰 Reminders",
      NoPaymentReminders: "No pending payment reminders",
      MustLoginToSeeReminders: "You must log in to see your reminders",
      ErrorLoadingReminders: "Error loading reminders",
      LoadingReminders: "Loading reminders...",
      TotalPaymentsPending: "Total pending payments:",
      TotalPaymentsColon: "Total Payments:",
      // Reminder editor
      EditReminder: "Edit reminder",
      Date: "Date",
      Time: "Time",
      Message: "Message",
      MessageOptional: "Message (optional)",
      MessagePlaceholder: "Remember to pay subscription",
      ScheduleNotification: "Schedule notification",
      ScheduleNotificationHint: "When enabled, you'll receive a local notification at the selected date and time. Make sure to grant alarm/precise-timing permissions if your device requires them.",
      Save: "Save",
      Delete: "Delete",
      DeleteReminderTitle: "Delete reminder",
      DeleteReminderConfirm: "Are you sure?",
      InvalidDate: "Invalid date",
      InvalidTime: "Invalid time",
      ReminderMustBeFuture: "The reminder must be scheduled in a future date and time.",
      ReminderTooSoon: "The reminder must be scheduled at least 1 minute in the future",
      SaveReminder: "Save reminder",
      SelectPayment: "Select a payment",
      SelectPaymentTitle: "Select a payment",
      Close: "Close",
      ErrorUpdatingReminder: "Error updating reminder",
      ErrorDeletingReminder: "Could not delete the reminder",
      Reminder: "Reminder",
      // Reminders list
      schedulingLimitedWarning: "Scheduling of reminders is limited in this environment (no trigger support). Some features may be unavailable.",
      FilterAll: "All",
      FilterPending: "Pending",
      FilterOverdue: "Overdue",
      FilterPaid: "Paid",
      noRemindersForFilter: "No reminders for this filter.",
      "status.today": "Today",
      "status.upcoming": "Upcoming",
      "status.overdue": "Overdue",
      "status.paid": "Paid",
      alarmPermissionRequiredTitle: "Permission required",
      alarmPermissionRequiredBody: "Android requires the exact alarm permission to schedule background reminders. Open settings to enable it?",
      openSettings: "Open settings",
      PaidOn: "Paid on",
      DueOn: "Due on",
      

      // Payment Actions
      Success: "Success",
      MarkedAsPaid: "marked as paid",
      Error: "Error",
      CouldNotMarkAsPaid: "Could not mark the payment as paid",
      DeletePayment: "Delete Payment",
      SureToDeletePayment: "Are you sure you want to delete the payment",
      Deleted: "deleted",
      CouldNotDeletePayment: "Could not delete the payment",

      // Payment Card
      PaymentColon: "Payment:",
    },
  },
}

async function getInitialLanguage() {
  const stored = await AsyncStorage.getItem("appLanguage")
  if (stored) return stored
  return Localization.getLocales()[0]?.languageCode ?? "en"
}

export async function initI18n() {
  const lng = await getInitialLanguage()
  await i18n.use(initReactI18next).init({
    resources,
    lng,
    fallbackLng: "en",
    interpolation: { escapeValue: false },
  })
  return i18n
}

export async function changeLanguage(lng: string) {
  await i18n.changeLanguage(lng)
  await AsyncStorage.setItem("appLanguage", lng)
}

export default i18n
