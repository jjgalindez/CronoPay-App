import AsyncStorage from "@react-native-async-storage/async-storage"
import * as Localization from "expo-localization"
import i18n from "i18next"
import { initReactI18next } from "react-i18next"

const resources = {
  es: {
    translation: {
      monthNames: [
        "Enero",
        "Febrero",
        "Marzo",
        "Abril",
        "Mayo",
        "Junio",
        "Julio",
        "Agosto",
        "Septiembre",
        "Octubre",
        "Noviembre",
        "Diciembre",
      ],
      monthNamesShort: [
        "Ene",
        "Feb",
        "Mar",
        "Abr",
        "May",
        "Jun",
        "Jul",
        "Ago",
        "Sep",
        "Oct",
        "Nov",
        "Dic",
      ],
      profilAndSettings: "Perfil y Configuración",
      editProfile: "Editar perfil",
      settings: "Configuraciones",
      notifications: "Notificaciones",
      PaymentReminders: "Recordatorios de pagos",
      language: "Idioma",
      chooseYourPreferredLanguage: "Elige tu idioma preferido",
      Spanish: "Español",
      theme: "Tema",
      chooseYourFavoriteTheme: "Elige tu tema preferido",
      backup: "Copia de seguridad",
      security: "Seguridad",
      themeLight: "Modo claro",
      themeDark: "Modo oscuro",
      backupAuto: "Respaldo automático",
      setUpAutomaticBackup: "Configurar respaldo automático",
      backupManual: "Respaldo manual",
      passwordAndAuth: "Contraseña y autenticación",
      ChangePassword: "Cambiar contraseña",
      ConfigurePasswordAndAuthentication:
        "Configurar contraseña y autenticación",
      TwoFactorAuth: "Autenticación de dos factores",
      signOut: "Cerrar sesión",
      AreYouSureYouWantToLogOut: "¿Estás seguro de que quieres cerrar sesión?",
      Cancel: "Cancelar",
      Confirm: "Confirmar",
      Paid: "Pagado",
      Pending: "Pendiente",
      Pendings: "Pendientes",
      Overdue: "Atrasado",
      Uncategoryed: "Sin categoría",
      Payments: "Pagos",
      Payment: "Pago",
      MonthPayment: "Pagos del mes",
      Completed: "Completado",
      TotalMonth: "Total Mensual",
      TotalAmount: "Monto Total",
      LoadingStats: "Cargando estadísticas...",
      LoadingReports: "Cargando reportes...",
      PaymentsEvolution: "Evolución de pagos",
      NoPaymentsData: "No hay datos de pagos disponibles",
      LastMovements: "Últimos movimientos",
      NoPeriodMovements: "No hay movimientos para este periodo.",
      Month: "Mes",
      Trimester: "Trimestre",
      Year: "Año",
      DistributionByCategory: "Distribución por categoría",
      VsLastMonth: "vs Mes Anterior",
      SelectMonthMessage: "Selecciona un mes para ver el resumen de tus pagos",
      TotalPayments: "Total de Pagos",
      NoCategoryData: "No hay datos disponibles para esta categoría",
      ExportReport: "Exportar Reporte",
      DownloadPDF: "Descargar PDF",
      ExportExcel: "Exportar Excel",
      SendMail: "Enviar por Correo",
      WIP: "Funcionalidad en desarrollo",
      WIPExcel:
        "La funcionalidad de exportar a Excel estará disponible próximamente",
      WIPEmail:
        "La funcionalidad de exportar por correo electrónico estará disponible próximamente",
      WIPPdf:
        "La funcionalidad de exportar a PDF estará disponible próximamente",
      PaymentsDetails: "Detalles de Pagos",
      Found: "encontrados",
      MonthSelectorMessage:
        "Selecciona el año y luego el mes para filtrar tus reportes.",
      SelectPeriod: "Elige un Periodo",
      PaymentsTitle: "Pagos",
      CalendarTitle: "Calendario",
      HomeTitle: "Inicio",
      StatisticsTitle: "Panel de Estadísticas",
      ReportsTitle: "Reportes Mensuales",
      PaymentTab: "Pagos",
      CalendarTab: "Calendario",
      HomeTab: "Inicio",
      StatisticsTab: "Estadísticas",
      ReportsTab: "Reportes",
      Hi: "Hola",
      WelcomeMessage: "Aqui tienes un resumen de tus pagos",
      User: "Usuario",
      Others: "Otros",
      NextDueDates: "Próximos Vencimientos",
      AddNewPayment: "Agregar Nuevo Pago",
    },
  },
  en: {
    translation: {
      monthNames: [
        "January",
        "February",
        "March",
        "April",
        "May",
        "June",
        "July",
        "August",
        "September",
        "October",
        "November",
        "December",
      ],
      monthNamesShort: [
        "Jan",
        "Feb",
        "Mar",
        "Apr",
        "May",
        "Jun",
        "Jul",
        "Aug",
        "Sep",
        "Oct",
        "Nov",
        "Dec",
      ],
      profilAndSettings: "Profile and Settings",
      editProfile: "Edit Profile",
      settings: "Settings",
      notifications: "Notifications",
      PaymentReminders: "Payment Reminders",
      language: "Language",
      chooseYourPreferredLanguage: "Choose your preferred language",
      Spanish: "Spanish",
      theme: "Theme",
      chooseYourFavoriteTheme: "Choose your favorite theme",
      backup: "Backup",
      security: "Security",
      themeLight: "Light mode",
      themeDark: "Dark mode",
      backupAuto: "Automatic backup",
      setUpAutomaticBackup: "Set up automatic backup",
      backupManual: "Manual backup",
      passwordAndAuth: "Password and authentication",
      ChangePassword: "Change Password",
      ConfigurePasswordAndAuthentication:
        "Configure Password and Authentication",
      TwoFactorAuth: "Two-factor authentication",
      signOut: "Sign Out",
      AreYouSureYouWantToLogOut: "Are you sure you want to log out?",
      Cancel: "Cancel",
      Confirm: "Confirm",
      Paid: "Paid",
      Pending: "Pending",
      Pendings: "Pendings",
      Overdue: "Overdue",
      Uncategoryed: "Uncategoryed",
      Payments: "Payments",
      Payment: "Payment",
      MonthPayment: "Month Payments",
      Completed: "Completed",
      TotalMonth: "Total Month",
      TotalAmount: "Total Amount",
      LoadingStats: "Loading statistics...",
      LoadingReports: "Loading reports...",
      PaymentsEvolution: "Payments Evolution",
      NoPaymentsData: "No payments data available",
      LastMovements: "Last Movements",
      NoPeriodMovements: "No movements for this period.",
      Month: "Month",
      Trimester: "Trimester",
      Year: "Year",
      DistributionByCategory: "Distribution by Category",
      VsLastMonth: "vs Last Month",
      SelectMonthMessage: "Select a month to view a summary of its payments",
      TotalPayments: "Total Payments",
      NoCategoryData: "No data available for this category",
      ExportReport: "Export Report",
      DownloadPDF: "Download PDF",
      ExportExcel: "Export Excel",
      SendMail: "Send by Email",
      WIP: "Work in progress",
      WIPExcel: "Excel export functionality will be available soon",
      WIPEmail: "Email export functionality will be available soon",
      WIPPdf: "PDF export functionality will be available soon",
      PaymentsDetails: "Payments Details",
      Found: "found",
      MonthSelectorMessage:
        "Select a year and then month to view your payment summary",
      SelectPeriod: "Select Period",
      PaymentsTitle: "Payments",
      CalendarTitle: "Calendar",
      HomeTitle: "Home",
      StatisticsTitle: "Statistics Dashboard",
      ReportsTitle: "Monthly Reports",
      PaymentTab: "Payments",
      CalendarTab: "Calendar",
      HomeTab: "Home",
      StatisticsTab: "Statistics",
      ReportsTab: "Reports",
      Hi: "Hi",
      WelcomeMessage: "Here is a summary of your payments",
      User: "User",
      Others: "Others",
      NextDueDates: "Next Due Dates",
      AddNewPayment: "Add New Payment",
    },
  },
}

async function getInitialLanguage() {
  const stored = await AsyncStorage.getItem("appLanguage")
  if (stored) return stored
  return Localization.getLocales()[0]?.languageCode ?? "en"
}

export async function initI18n() {
  const lng = await getInitialLanguage()
  await i18n.use(initReactI18next).init({
    resources,
    lng,
    fallbackLng: "en",
    interpolation: { escapeValue: false },
  })
  return i18n
}

export async function changeLanguage(lng: string) {
  await i18n.changeLanguage(lng)
  await AsyncStorage.setItem("appLanguage", lng)
}

export default i18n
